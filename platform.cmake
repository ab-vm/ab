macro(omr_normalize_cpu cpu_var)
string(TOLOWER ${CMAKE_SYSTEM_PROCESSOR} CMAKE_SYSTEM_PROCESSOR)
if (NOT CMAKE_SYSTEM_PROCESSOR)
	message(FATAL_ERROR "CMAKE_SYSTEM_PROCESSOR not set")
elseif(CMAKE_SYSTEM_PROCESSOR MATCHES "^(x86|i386|i686)$")
	set(CMAKE_SYSTEM_PROCESSOR "x86")
elseif(CMAKE_SYSTEM_PROCESSOR MATCHES "^(arm)$")
	set(CMAKE_SYSTEM_PROCESSOR "arm")
elseif(CMAKE_SYSTEM_PROCESSOR MATCHES "^(amd64||x86-64|x86_64|x64)$")
	set(CMAKE_SYSTEM_PROCESSOR "x86-64")
elseif(CMAKE_SYSTEM_PROCESSOR MATCHES "^os390$")
	set(CMAKE_SYSTEM_PROCESSOR "os390")
else()
	message(FATAL_ERROR "Unknown processor $C")
endif()

omr_normalize_cpu(CMAKE_SYSTEM_PROCESSOR)
omr_normalize_cpu(CMAKE_HOST_SYSTEM_PROCESSOR)
